{"ast":null,"code":"import _asyncToGenerator from \"/Users/dantasbradley/Documents/GitHub/CEN3031Proj/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { TestBed } from '@angular/core/testing';\nimport { HttpClientTestingModule, HttpTestingController } from '@angular/common/http/testing';\nimport { RouterTestingModule } from '@angular/router/testing';\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\nimport { ForgetPasswordComponent } from './forget-password.component';\nimport { UserIdService } from 'app/userIdService';\ndescribe('ForgetPasswordComponent', () => {\n  let component;\n  let fixture;\n  let httpMock;\n  let mockUserIdService;\n  beforeEach( /*#__PURE__*/_asyncToGenerator(function* () {\n    mockUserIdService = jasmine.createSpyObj('UserIdService', ['saveUserId']);\n    yield TestBed.configureTestingModule({\n      declarations: [ForgetPasswordComponent],\n      imports: [HttpClientTestingModule, RouterTestingModule, FormsModule, ReactiveFormsModule],\n      providers: [{\n        provide: UserIdService,\n        useValue: mockUserIdService\n      }]\n    }).compileComponents();\n  }));\n  beforeEach(() => {\n    fixture = TestBed.createComponent(ForgetPasswordComponent);\n    component = fixture.componentInstance;\n    fixture.detectChanges();\n    httpMock = TestBed.inject(HttpTestingController);\n  });\n  afterEach(() => {\n    httpMock.verify();\n  });\n  it('should create the component', () => {\n    expect(component).toBeTruthy();\n  });\n  it('should be invalid when no input is provided', () => {\n    component.email = '';\n    component.securityQuestion = '';\n    component.newPass = '';\n    expect(component.forgetPasswordForm.valid).toBeFalsy();\n  });\n  it('should be invalid when only email is provided', () => {\n    component.email = 'test@test.com';\n    component.securityQuestion = '';\n    component.newPass = '';\n    expect(component.forgetPasswordForm.valid).toBeFalsy();\n  });\n  it('should be invalid when only security question is provided', () => {\n    component.email = '';\n    component.securityQuestion = 'What is your favorite color?';\n    component.newPass = '';\n    expect(component.forgetPasswordForm.valid).toBeFalsy();\n  });\n  it('should be invalid when only new password is provided', () => {\n    component.email = '';\n    component.securityQuestion = '';\n    component.newPass = 'test123';\n    expect(component.forgetPasswordForm.valid).toBeFalsy();\n  });\n  it('should be valid when all inputs are provided', () => {\n    component.email = 'test@test.com';\n    component.securityQuestion = 'What is your favorite color?';\n    component.newPass = 'test123';\n    expect(component.forgetPasswordForm.valid).toBeTruthy();\n  });\n  it('should call onSubmit() function when form is submitted', () => {\n    spyOn(component, 'onSubmit');\n    component.forgetPasswordForm.setValue({\n      email: 'test@test.com',\n      securityQuestion: 'What is your favorite color?',\n      newPass: 'test123'\n    });\n    let button = fixture.debugElement.nativeElement.querySelector('button');\n    button.click();\n    expect(component.onSubmit).toHaveBeenCalled();\n  });\n  it('should navigate to login page on successful password reset', fakeAsync(() => {\n    spyOn(component.router, 'navigate');\n    component.onSubmit();\n    tick();\n    expect(component.router.navigate).toHaveBeenCalledWith(['/login']);\n  }));\n  it('should display error message on unsuccessful password reset', fakeAsync(() => {\n    spyOn(window.console, 'log');\n    spyOn(component.router, 'navigate');\n    spyOn(component.http, 'post').and.returnValue(throwError({\n      status: 404\n    }));\n    component.onSubmit();\n    tick();\n    expect(window.console.log).toHaveBeenCalled();\n    expect(component.router.navigate).not.toHaveBeenCalledWith(['/login']);\n  }));\n});","map":{"version":3,"mappings":";AAAA,SAA2BA,OAA3B,QAA0C,uBAA1C;AACA,SAASC,uBAAT,EAAkCC,qBAAlC,QAA+D,8BAA/D;AACA,SAASC,mBAAT,QAAoC,yBAApC;AACA,SAASC,mBAAT,EAA8BC,WAA9B,QAAiD,gBAAjD;AAGA,SAASC,uBAAT,QAAwC,6BAAxC;AACA,SAASC,aAAT,QAA8B,mBAA9B;AAEAC,QAAQ,CAAC,yBAAD,EAA4B,MAAK;EACvC,IAAIC,SAAJ;EACA,IAAIC,OAAJ;EACA,IAAIC,QAAJ;EACA,IAAIC,iBAAJ;EAEAC,UAAU,iCAAC,aAAW;IACpBD,iBAAiB,GAAGE,OAAO,CAACC,YAAR,CAAqB,eAArB,EAAsC,CAAC,YAAD,CAAtC,CAApB;IAEA,MAAMf,OAAO,CAACgB,sBAAR,CAA+B;MACnCC,YAAY,EAAE,CAAEX,uBAAF,CADqB;MAEnCY,OAAO,EAAE,CACPjB,uBADO,EAEPE,mBAFO,EAGPE,WAHO,EAIPD,mBAJO,CAF0B;MAQnCe,SAAS,EAAE,CACT;QAAEC,OAAO,EAAEb,aAAX;QAA0Bc,QAAQ,EAAET;MAApC,CADS;IARwB,CAA/B,EAYLU,iBAZK,EAAN;EAaD,CAhBS,EAAV;EAkBAT,UAAU,CAAC,MAAK;IACdH,OAAO,GAAGV,OAAO,CAACuB,eAAR,CAAwBjB,uBAAxB,CAAV;IACAG,SAAS,GAAGC,OAAO,CAACc,iBAApB;IACAd,OAAO,CAACe,aAAR;IACAd,QAAQ,GAAGX,OAAO,CAAC0B,MAAR,CAAexB,qBAAf,CAAX;EACD,CALS,CAAV;EAOAyB,SAAS,CAAC,MAAK;IACbhB,QAAQ,CAACiB,MAAT;EACD,CAFQ,CAAT;EAIAC,EAAE,CAAC,6BAAD,EAAgC,MAAK;IACrCC,MAAM,CAACrB,SAAD,CAAN,CAAkBsB,UAAlB;EACD,CAFC,CAAF;EAIAF,EAAE,CAAC,6CAAD,EAAgD,MAAK;IACrDpB,SAAS,CAACuB,KAAV,GAAkB,EAAlB;IACAvB,SAAS,CAACwB,gBAAV,GAA6B,EAA7B;IACAxB,SAAS,CAACyB,OAAV,GAAoB,EAApB;IACAJ,MAAM,CAACrB,SAAS,CAAC0B,kBAAV,CAA6BC,KAA9B,CAAN,CAA2CC,SAA3C;EACD,CALC,CAAF;EAOAR,EAAE,CAAC,+CAAD,EAAkD,MAAK;IACvDpB,SAAS,CAACuB,KAAV,GAAkB,eAAlB;IACAvB,SAAS,CAACwB,gBAAV,GAA6B,EAA7B;IACAxB,SAAS,CAACyB,OAAV,GAAoB,EAApB;IACAJ,MAAM,CAACrB,SAAS,CAAC0B,kBAAV,CAA6BC,KAA9B,CAAN,CAA2CC,SAA3C;EACD,CALC,CAAF;EAOAR,EAAE,CAAC,2DAAD,EAA8D,MAAK;IACnEpB,SAAS,CAACuB,KAAV,GAAkB,EAAlB;IACAvB,SAAS,CAACwB,gBAAV,GAA6B,8BAA7B;IACAxB,SAAS,CAACyB,OAAV,GAAoB,EAApB;IACAJ,MAAM,CAACrB,SAAS,CAAC0B,kBAAV,CAA6BC,KAA9B,CAAN,CAA2CC,SAA3C;EACD,CALC,CAAF;EAQAR,EAAE,CAAC,sDAAD,EAAyD,MAAK;IAC9DpB,SAAS,CAACuB,KAAV,GAAkB,EAAlB;IACAvB,SAAS,CAACwB,gBAAV,GAA6B,EAA7B;IACAxB,SAAS,CAACyB,OAAV,GAAoB,SAApB;IACAJ,MAAM,CAACrB,SAAS,CAAC0B,kBAAV,CAA6BC,KAA9B,CAAN,CAA2CC,SAA3C;EACD,CALC,CAAF;EAOAR,EAAE,CAAC,8CAAD,EAAiD,MAAK;IACtDpB,SAAS,CAACuB,KAAV,GAAkB,eAAlB;IACAvB,SAAS,CAACwB,gBAAV,GAA6B,8BAA7B;IACAxB,SAAS,CAACyB,OAAV,GAAoB,SAApB;IACAJ,MAAM,CAACrB,SAAS,CAAC0B,kBAAV,CAA6BC,KAA9B,CAAN,CAA2CL,UAA3C;EACD,CALC,CAAF;EAQAF,EAAE,CAAC,wDAAD,EAA2D,MAAK;IAChES,KAAK,CAAC7B,SAAD,EAAY,UAAZ,CAAL;IACAA,SAAS,CAAC0B,kBAAV,CAA6BI,QAA7B,CAAsC;MACpCP,KAAK,EAAE,eAD6B;MAEpCC,gBAAgB,EAAE,8BAFkB;MAGpCC,OAAO,EAAE;IAH2B,CAAtC;IAKA,IAAIM,MAAM,GAAG9B,OAAO,CAAC+B,YAAR,CAAqBC,aAArB,CAAmCC,aAAnC,CAAiD,QAAjD,CAAb;IACAH,MAAM,CAACI,KAAP;IACAd,MAAM,CAACrB,SAAS,CAACoC,QAAX,CAAN,CAA2BC,gBAA3B;EACD,CAVC,CAAF;EAaAjB,EAAE,CAAC,4DAAD,EAA+DkB,SAAS,CAAC,MAAK;IAC9ET,KAAK,CAAC7B,SAAS,CAACuC,MAAX,EAAmB,UAAnB,CAAL;IACAvC,SAAS,CAACoC,QAAV;IACAI,IAAI;IACJnB,MAAM,CAACrB,SAAS,CAACuC,MAAV,CAAiBE,QAAlB,CAAN,CAAkCC,oBAAlC,CAAuD,CAAC,QAAD,CAAvD;EACD,CALyE,CAAxE,CAAF;EAOAtB,EAAE,CAAC,6DAAD,EAAgEkB,SAAS,CAAC,MAAK;IAC/ET,KAAK,CAACc,MAAM,CAACC,OAAR,EAAiB,KAAjB,CAAL;IACAf,KAAK,CAAC7B,SAAS,CAACuC,MAAX,EAAmB,UAAnB,CAAL;IACAV,KAAK,CAAC7B,SAAS,CAAC6C,IAAX,EAAiB,MAAjB,CAAL,CAA8BC,GAA9B,CAAkCC,WAAlC,CAA8CC,UAAU,CAAC;MAACC,MAAM,EAAE;IAAT,CAAD,CAAxD;IACAjD,SAAS,CAACoC,QAAV;IACAI,IAAI;IACJnB,MAAM,CAACsB,MAAM,CAACC,OAAP,CAAeM,GAAhB,CAAN,CAA2Bb,gBAA3B;IACAhB,MAAM,CAACrB,SAAS,CAACuC,MAAV,CAAiBE,QAAlB,CAAN,CAAkCU,GAAlC,CAAsCT,oBAAtC,CAA2D,CAAC,QAAD,CAA3D;EACD,CAR0E,CAAzE,CAAF;AAWD,CA3GO,CAAR","names":["TestBed","HttpClientTestingModule","HttpTestingController","RouterTestingModule","ReactiveFormsModule","FormsModule","ForgetPasswordComponent","UserIdService","describe","component","fixture","httpMock","mockUserIdService","beforeEach","jasmine","createSpyObj","configureTestingModule","declarations","imports","providers","provide","useValue","compileComponents","createComponent","componentInstance","detectChanges","inject","afterEach","verify","it","expect","toBeTruthy","email","securityQuestion","newPass","forgetPasswordForm","valid","toBeFalsy","spyOn","setValue","button","debugElement","nativeElement","querySelector","click","onSubmit","toHaveBeenCalled","fakeAsync","router","tick","navigate","toHaveBeenCalledWith","window","console","http","and","returnValue","throwError","status","log","not"],"sourceRoot":"","sources":["/Users/dantasbradley/Documents/GitHub/CEN3031Proj/src/app/forget-password/forget-password.component.spec.ts"],"sourcesContent":["import { ComponentFixture, TestBed } from '@angular/core/testing';\nimport { HttpClientTestingModule, HttpTestingController } from '@angular/common/http/testing';\nimport { RouterTestingModule } from '@angular/router/testing';\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\nimport { Observable } from 'rxjs';\n\nimport { ForgetPasswordComponent } from './forget-password.component';\nimport { UserIdService } from 'app/userIdService';\n\ndescribe('ForgetPasswordComponent', () => {\n  let component: ForgetPasswordComponent;\n  let fixture: ComponentFixture<ForgetPasswordComponent>;\n  let httpMock: HttpTestingController;\n  let mockUserIdService: jasmine.SpyObj<UserIdService>;\n\n  beforeEach(async () => {\n    mockUserIdService = jasmine.createSpyObj('UserIdService', ['saveUserId']);\n\n    await TestBed.configureTestingModule({\n      declarations: [ ForgetPasswordComponent ],\n      imports: [ \n        HttpClientTestingModule,\n        RouterTestingModule,\n        FormsModule,\n        ReactiveFormsModule\n      ],\n      providers: [\n        { provide: UserIdService, useValue: mockUserIdService }\n      ]\n    })\n    .compileComponents();\n  });\n\n  beforeEach(() => {\n    fixture = TestBed.createComponent(ForgetPasswordComponent);\n    component = fixture.componentInstance;\n    fixture.detectChanges();\n    httpMock = TestBed.inject(HttpTestingController);\n  });\n\n  afterEach(() => {\n    httpMock.verify();\n  });\n\n  it('should create the component', () => {\n    expect(component).toBeTruthy();\n  });\n\n  it('should be invalid when no input is provided', () => {\n    component.email = '';\n    component.securityQuestion = '';\n    component.newPass = '';\n    expect(component.forgetPasswordForm.valid).toBeFalsy();\n  });\n\n  it('should be invalid when only email is provided', () => {\n    component.email = 'test@test.com';\n    component.securityQuestion = '';\n    component.newPass = '';\n    expect(component.forgetPasswordForm.valid).toBeFalsy();\n  });\n\n  it('should be invalid when only security question is provided', () => {\n    component.email = '';\n    component.securityQuestion = 'What is your favorite color?';\n    component.newPass = '';\n    expect(component.forgetPasswordForm.valid).toBeFalsy();\n  });\n\n\n  it('should be invalid when only new password is provided', () => {\n    component.email = '';\n    component.securityQuestion = '';\n    component.newPass = 'test123';\n    expect(component.forgetPasswordForm.valid).toBeFalsy();\n  });\n\n  it('should be valid when all inputs are provided', () => {\n    component.email = 'test@test.com';\n    component.securityQuestion = 'What is your favorite color?';\n    component.newPass = 'test123';\n    expect(component.forgetPasswordForm.valid).toBeTruthy();\n  });\n\n\n  it('should call onSubmit() function when form is submitted', () => {\n    spyOn(component, 'onSubmit');\n    component.forgetPasswordForm.setValue({\n      email: 'test@test.com',\n      securityQuestion: 'What is your favorite color?',\n      newPass: 'test123'\n    });\n    let button = fixture.debugElement.nativeElement.querySelector('button');\n    button.click();\n    expect(component.onSubmit).toHaveBeenCalled();\n  });\n\n\n  it('should navigate to login page on successful password reset', fakeAsync(() => {\n    spyOn(component.router, 'navigate');\n    component.onSubmit();\n    tick();\n    expect(component.router.navigate).toHaveBeenCalledWith(['/login']);\n  }));\n\n  it('should display error message on unsuccessful password reset', fakeAsync(() => {\n    spyOn(window.console, 'log');\n    spyOn(component.router, 'navigate');\n    spyOn(component.http, 'post').and.returnValue(throwError({status: 404}));\n    component.onSubmit();\n    tick();\n    expect(window.console.log).toHaveBeenCalled();\n    expect(component.router.navigate).not.toHaveBeenCalledWith(['/login']);\n  }));\n\n  \n});"]},"metadata":{},"sourceType":"module"}