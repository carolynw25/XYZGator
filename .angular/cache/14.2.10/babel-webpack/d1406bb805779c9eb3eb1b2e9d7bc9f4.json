{"ast":null,"code":"import { __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormBuilder } from \"@angular/forms\";\nimport { HttpClient } from '@angular/common/http';\nimport { Router } from '@angular/router'; //making it personalized\n//export let ID: any; // declare global variable\n\nlet LoginComponent = class LoginComponent {\n  constructor(formBuilder, http, router, user) {\n    this.formBuilder = formBuilder;\n    this.http = http;\n    this.router = router;\n    this.user = user; // @Input() errorMessage = ''\n    // @Output() onLogin: EventEmitter<AuthService(username: string, password: string )> = new EventEmitter()\n\n    this.username = '';\n    this.password = '';\n    this.userLogin = [{\n      username: 'fg',\n      password: 'gg'\n    }];\n  } //ID variable\n  //public ID: any;\n\n\n  ngOnInit() {\n    this.loginForm = this.formBuilder.group({\n      username: [''],\n      password: ['']\n    });\n  }\n\n  saveUserID(username, password) {\n    const url = 'http://127.0.0.1:8080/api/getID'; // replace with your actual API endpoint\n\n    const credentials = {\n      username,\n      password\n    };\n    this.http.post(url, credentials).subscribe(response => {\n      const userID = response.id; // Do something with the userID, such as storing it in a variable or using it to make another API request\n\n      this.UserIdService.setUserId(userID);\n    }, error => {\n      console.error(error);\n    });\n  }\n\n  onSubmit() {\n    // this.onLogin.emit({\n    //   username: this.username, password: this.password\n    // })\n    const body = {\n      username: this.username,\n      password: this.password\n    }; //const options = {headers: new HttpHeaders({'Content-Type':'application/json'}) };\n\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    this.http.post('http://127.0.0.1:8080/api/login', body, {\n      headers\n    }).subscribe(response => {\n      this.saveUserID(this.username, this.password); // this.http.post('http://127.0.0.1:8080/api/getID', {}, {headers}).subscribe(\n      //   response => {\n      //     //this.ID = response['id'];\n      //     const id = response['id'];\n      //     localStorage.setItem('userID', id); // save the ID to localStorage\n      //     this.router.navigate(['/main']);\n      //   },\n      //   error => {\n      //     console.log(error);\n      //   }\n      // );\n      // If the login is successful, redirect the user to the dashboard page\n\n      this.router.navigate(['/main']); //document.write(\"Welcome to the Web Page!\");\n    }, error => {\n      // If the login is unsuccessful, display an error message\n      console.log(error); //this.router.navigate(['/main']);\n    });\n  }\n\n  checkData() {}\n\n};\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n}), __metadata(\"design:paramtypes\", [FormBuilder, HttpClient, Router, Object])], LoginComponent);\nexport { LoginComponent };","map":null,"metadata":{},"sourceType":"module"}